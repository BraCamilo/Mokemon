<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PokemonPrueba</title>
    <style>
        #tituloPrincipal {
            width: auto;
            height: 10vh;
            background-color: gray;
            padding: 20px;
        }
    
        #selcionar-mascota {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
        }
    
        .mascota {
            margin: 10px;
            background-color: bisque;
            box-sizing: border-box;
            padding: 5px;
            border: 1px solid gray;
        }
    </style>
    <script>
        let ataqueJugador;
        let ataqueEnemigo;
        let vidasJugador = 3;
        let vidasEnemigo = 3;
        const tipos = ['Fuego', 'Agua', 'Tierra'];

        window.addEventListener("load", iniciarJuego)

        function iniciarJuego() {
            let selectionSeleccionarAtaque = document.getElementById("Selcionar ataque")
            selectionSeleccionarAtaque.style.display = `none`


            const btnMascota = document.getElementById('boton-mascota');
            const btnFuego = document.getElementById('boton-fuego');
            const btnAgua = document.getElementById('boton-agua');
            const btnTierra = document.getElementById('boton-tierra');
            const spanVidasJugador = document.getElementById('VidasJugador');
            const spanVidasEnemigo = document.getElementById('VidasEnemigo');
            const sectionMensajes = document.getElementById('mensajes');
            let inputHipodoge = document.getElementById("Hipodoge");
            let inputCapipero = document.getElementById("Capipero");
            let inputPydos = document.getElementById("Pydos");
            let spanMascotaJugador = document.getElementById("mascotaJugador");
            let botonReiniciar = document.getElementById("reiniciar");

            btnMascota.addEventListener('click', seleccionarMascotaJugador);
            btnFuego.addEventListener('click', () => ataque('Fuego'));
            btnAgua.addEventListener('click', () => ataque('Agua'));
            btnTierra.addEventListener('click', () => ataque('Tierra'));
            botonReiniciar.addEventListener("click", reiniciar);

            function seleccionarMascotaJugador() {
                let selectionSeleccionarAtaque = document.getElementById("Selcionar ataque")
                selectionSeleccionarAtaque.style.display = `block`

                let selectionSeleccionarMascota = document.getElementById("selcionar-mascota")
                selectionSeleccionarMascota.style.display = `none`

                if (inputHipodoge.checked) {
                    spanMascotaJugador.innerHTML = "Hipodoge";
                } else if (inputCapipero.checked) {
                    spanMascotaJugador.innerHTML = `Capipepo`;
                } else if (inputPydos.checked) {
                    spanMascotaJugador.innerHTML = `Pydos`;
                } else {
                    alert("Selecciona una Mascota");
                }
                seleccionarMascotaEnemigo();
            }

            function seleccionarMascotaEnemigo() {
                let mascotaAleatorio = aleatorio(1, 3);
                let spanMascotaEnemigo = document.getElementById("mascotaEnemigo");

                if (mascotaAleatorio == 1) {
                    spanMascotaEnemigo.innerHTML = "Hipodoge";
                } else if (mascotaAleatorio == 2) {
                    spanMascotaEnemigo.innerHTML = "Capipepo";
                } else {
                    spanMascotaEnemigo.innerHTML = "Pydos";
                }
            }

            function ataque(ataqueJugador) {
                const ataqueAleatorio = tipos[Math.floor(Math.random() * tipos.length)];
                ataqueEnemigo = ataqueAleatorio;

                combatir(ataqueJugador, ataqueEnemigo);
            }

            function combatir(ataqueJugador, ataqueEnemigo) {
                let resultado;
                if (ataqueJugador === ataqueEnemigo) {
                    resultado = 'EMPATE';
                } else if (
                    (ataqueJugador === 'Fuego' && ataqueEnemigo === 'Tierra') ||
                    (ataqueJugador === 'Agua' && ataqueEnemigo === 'Fuego') ||
                    (ataqueJugador === 'Tierra' && ataqueEnemigo === 'Agua')
                ) {
                    resultado = 'GANASTE';
                    vidasEnemigo--;
                } else {
                    resultado = 'PERDISTE';
                    vidasJugador--;
                }

                spanVidasJugador.textContent = vidasJugador;
                spanVidasEnemigo.textContent = vidasEnemigo;

                nuevoParrafo(resultado);
                verificarFinJuego();
            }

            function nuevoParrafo(resultado) {
                const nuevoP = document.createElement('p');
                nuevoP.textContent = `Tu mascota atacÃ³ con ${ataqueJugador} y el enemigo con ${ataqueEnemigo}. ${resultado}`;
                sectionMensajes.appendChild(nuevoP);
            }

            function verificarFinJuego() {
                if (vidasJugador === 0) {
                    nuevoParrafo('Â¡Has perdido!');
                    deshabilitarBotones();
                } else if (vidasEnemigo === 0) {
                    nuevoParrafo('Â¡Has ganado!');
                    deshabilitarBotones();
                }
            }

            function deshabilitarBotones() {
                btnFuego.disabled = true;
                btnAgua.disabled = true;
                btnTierra.disabled = true;
            }

            function reiniciar() {
                location.reload();
            }

            function aleatorio(min, max) {
                return Math.floor(Math.random() * (max - min + 1) + min);
            }
        }


    </script>
</head>
<body>
    <h1 id="tituloPrincipal">Â¡Pokemon Juego de pelea entre diferentes pokemones! ðŸ”¥ ðŸ’§ ðŸŒ±</h1>

    <!--Usamos el atributo id para nombrar a la etiqueta y de esta forma pueda ser llamada desde cualquier otro lado-->
    <section id="selcionar-mascota">
        <h3>Selecciona a una mascota</h3>
        <!--El tipo de dato "radio" no permite habilitar un botÃ³n de opciÃ³n. Se selecciona uno de varios.
        Al seleccionar un boton podremos hacer que los demas se desselecionen nombre a mÃ¡s de una etiqueta con la misma clase, o mismo grupo-->
        <input type="radio" name="mascota" id="Hipodoge">
        <label for="Hipodoge">Hipodoge</label>

        <input type="radio" name="mascota" id="Capipero">
        <label for="Capipero">Capipero</label>

        <input type="radio" name="mascota" id="Pydos">
        <label for="Pydos">Pydos</label>
        <!--AcompaÃ±ado los input de la etiqueta label para asÃ­ mostrar al usuario lo que esta seleccionando.-->

        <Button id="boton-mascota">Te elijo a ti</Button>
    </section>

    <section id="Selcionar ataque">
        <h3>Selecciona un ataque</h3>

        <p>Tu mascota <span id="mascotaJugador"></span> tiene <span id="VidasJugador">3</span> vidas</p>
        <p>La mascota <span id="mascotaEnemigo"></span> del enemigo tiene <span id="VidasEnemigo">3</span> vidas</p>
        
        <p>
            <button id="boton-fuego">Fuego ðŸ”¥</button>
            <button id="boton-agua">Agua ðŸ’§</button>
            <button id="boton-tierra">Tierra ðŸŒ±</button>
        </p>

        <p id="textoDeLucha"></p>

    <section id="mensajes"></section>

    <section id="reiniciar">
        <button id="boton-reiniciar">Reiniciar</button>
    </section>

    
</body>
</html>